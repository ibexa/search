imports:
    - { resource: forms.yaml }
    - { resource: twig.yaml }
    - { resource: sorting_definitions.yaml }
    - { resource: views.yaml }

services:
    _defaults:
        autoconfigure: true
        autowire: true
        public: false

    Ibexa\Bundle\Search\Controller\SearchController:
        tags:
            - controller.service_arguments

    Ibexa\Bundle\Search\Controller\SuggestionController:
        tags:
            - controller.service_arguments

    Ibexa\Search\Mapper\PagerSearchContentToDataMapper:
        arguments:
            $contentTypeService: '@ibexa.api.service.content_type'
            $userService: '@ibexa.api.service.user'
            $userLanguagePreferenceProvider: '@Ibexa\Core\MVC\Symfony\Locale\UserLanguagePreferenceProvider'
            $translationHelper: '@Ibexa\Core\Helper\TranslationHelper'
            $languageService: '@ibexa.api.service.language'

    Ibexa\Search\QueryType\SearchQueryType: ~

    Ibexa\Search\EventDispatcher\EventListener\ContentSuggestionSubscriber: ~

    Ibexa\Search\Mapper\SearchHitToContentSuggestionMapper: ~

    Ibexa\Contracts\Search\Mapper\SearchHitToContentSuggestionMapper: '@Ibexa\Search\Mapper\SearchHitToContentSuggestionMapper'

    Ibexa\Search\Service\SuggestionService: ~

    Ibexa\Bundle\Search\Request\ParamConverter\SuggestionQueryParamConverter:
        arguments:
            $defaultLimit: '%ibexa.site_access.config.default.search.suggestion.min_query_length%'
        tags:
            - { name: 'request.param_converter', priority: 0 }
